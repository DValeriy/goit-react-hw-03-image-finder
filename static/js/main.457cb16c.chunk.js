(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{17:function(e,t,a){e.exports={ImageGalleryItem:"ImageGalleryItem_ImageGalleryItem__2P4OQ",ImageGalleryItemImage:"ImageGalleryItem_ImageGalleryItemImage__1v0BW"}},18:function(e,t,a){e.exports={Overlay:"Modal_Overlay__1hWUU",Modal:"Modal_Modal__g8Juh"}},29:function(e,t,a){e.exports={App:"App_App__3ndVx",Searchbar:"App_Searchbar__1l1s1"}},30:function(e,t,a){e.exports={ImageGallery:"ImageGallery_ImageGallery__jeGcT"}},32:function(e,t,a){e.exports={PreLoader:"Loader_PreLoader__31KGX"}},33:function(e,t,a){e.exports={Button:"Button_Button__3jLt4"}},39:function(e,t,a){},81:function(e,t,a){"use strict";a.r(t);var r=a(1),n=a.n(r),o=a(28),l=a.n(o),c=(a(39),a(8)),i=a.n(c),s=a(19),u=a(13),h=a(4),m=a(5),d=a(7),g=a(6),p=a(29),b=a.n(p),y=a(14),f=a.n(y),j=a(9),O=a.n(j),S=a(0),v=function(e){Object(d.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(h.a)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={querry:""},e.handleChange=function(t){var a=t.target.value;e.setState({querry:a})},e.cbOnSubmit=function(t){t.preventDefault(),(0,e.props.onSubmit)(e.state)},e}return Object(m.a)(a,[{key:"render",value:function(){return Object(S.jsx)("header",{className:O.a.Searchbar,children:Object(S.jsxs)("form",{className:O.a.SearchForm,onSubmit:this.cbOnSubmit,children:[Object(S.jsx)("button",{type:"submit",className:O.a.SearchFormButton,children:Object(S.jsx)("span",{className:O.a.SearchFormButtonLabel,children:"Search"})}),Object(S.jsx)("input",{onChange:this.handleChange,className:O.a.SearchFormInput,type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",value:this.state.query})]})})}}]),a}(r.PureComponent),I=v,_=a(10),w=a(34),x=a(30),k=a.n(x),L=a(17),C=a.n(L),M=function(e){var t=e.webformatURL,a=e.largeImageURL,r=e.handleImgClick;console.log("ImageGalleryItem");return Object(S.jsx)("li",{className:C.a.ImageGalleryItem,onClick:function(e){return r(a)},children:Object(S.jsx)("img",{src:t,alt:a,className:C.a.ImageGalleryItemImage})})},F=["id"],G=function(e){var t=e.gallery,a=e.handleImgClick;console.log("ImageGallery");var r=t.map((function(e){var t=e.id,r=Object(w.a)(e,F);return Object(S.jsx)(M,Object(_.a)(Object(_.a)({},r),{},{handleImgClick:a}),t)}));return Object(S.jsx)("ul",{className:k.a.ImageGallery,children:r})},N=a(31),B=a.n(N),U=a(32),q=a.n(U),P=function(){return Object(S.jsx)(B.a,{className:q.a.PreLoader,type:"Puff",color:"#00BFFF",height:100,width:100,timeout:3e3})},D=a(18),A=a.n(D),K=function(e){Object(d.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(h.a)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={},e.cbOnClick=function(t){var a=e.props.handleModalClose;t.currentTarget===t.target&&a()},e.cbOnKeyDown=function(t){var a=e.props.handleModalClose;"Escape"===t.code&&a()},e}return Object(m.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.cbOnKeyDown)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.cbOnKeyDown)}},{key:"render",value:function(){var e=this.props.imgUrl;return Object(S.jsx)("div",{className:A.a.Overlay,onClick:this.cbOnClick,onKeyDown:this.cbOnKeyDown,children:Object(S.jsx)("div",{className:A.a.Modal,children:Object(S.jsx)("img",{src:e,alt:e})})})}}]),a}(r.PureComponent),E=K,J=a(33),T=a.n(J),z=function(e){var t=e.handleLoadMore;return Object(S.jsx)("button",{onClick:function(){t()},className:T.a.Button,children:"Load More"})},R=a(15),V=a.n(R),W=function(){var e=Object(u.a)(i.a.mark((function e(){var t,a,r,n,o,l,c=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:"cat",a=c.length>1&&void 0!==c[1]?c[1]:1,V.a.defaults.baseURL="https://pixabay.com/api/",r={per_page:12,orientation:"horizontal",image_type:"photo",key:"23806405-99649229521d5b9443986f071",page:a,q:t},e.prev=4,e.next=7,V()("?",{params:Object(_.a)({},r)});case 7:return n=e.sent,o=n.data.hits,l=n.data.total,e.abrupt("return",{gallery:o,galleryTotal:l});case 13:throw e.prev=13,e.t0=e.catch(4),e.t0;case 16:case"end":return e.stop()}}),e,null,[[4,13]])})));return function(){return e.apply(this,arguments)}}(),Q=function(e){Object(d.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(h.a)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={galerySize:0,galleryImg:[],isShowModal:!1,isShowLoader:!1,querry:"",page:1,imgUrl:""},e.onSubmit=function(t){var a=t.querry;e.setState({querry:a,galleryImg:[],page:1})},e.togglePreloader=function(){e.setState((function(e){return{isShowLoader:!e.isShowLoader}}))},e.handleBtnLoadMore=function(){e.setState((function(e){return{page:e.page+1}}))},e.handleImgClick=function(t){e.setState({isShowModal:!e.state.isShowModal,imgUrl:t})},e.handleModalClose=function(){e.setState({isShowModal:!e.state.isShowModal})},e.loadImg=Object(u.a)(i.a.mark((function t(){var a,r,n,o,l,c;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.state,r=a.querry,n=a.page,a.galleryImg,e.togglePreloader(),t.prev=2,t.next=5,W(r,n);case 5:o=t.sent,l=o.gallery,c=o.galleryTotal,l&&l.length?(console.log("if"),e.setState((function(e){return{galerySize:c,galleryImg:[].concat(Object(s.a)(e.galleryImg),Object(s.a)(l)),isShowLoader:!1}})),1!==n&&window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})):l&&0===l.length&&(console.log("else if"),f.a.Notify.warning("No result for your request!"),e.setState({querry:"",page:1,isShowLoader:!1})),t.next=16;break;case 11:t.prev=11,t.t0=t.catch(2),console.dir(t.t0),f.a.Notify.failure(t.t0.message),e.togglePreloader();case 16:case"end":return t.stop()}}),t,null,[[2,11]])}))),e}return Object(m.a)(a,[{key:"componentDidUpdate",value:function(e,t){console.log("componentDidUpdate");var a=this.state,r=a.querry,n=a.page;if(t.querry!==r||t.page!==n){if(!r)return;this.loadImg()}}},{key:"render",value:function(){var e=this.state,t=e.galleryImg,a=e.imgUrl,r=e.isShowModal,n=e.isShowLoader,o=e.galerySize-t.length;return console.log("render"),Object(S.jsxs)("div",{className:b.a.App,children:[Object(S.jsx)(I,{onSubmit:this.onSubmit}),t.length&&Object(S.jsx)(G,{gallery:t,handleImgClick:this.handleImgClick}),n&&Object(S.jsx)(P,{}),!n&&!!t.length&&o&&Object(S.jsx)(z,{handleLoadMore:this.handleBtnLoadMore}),r&&Object(S.jsx)(E,{imgUrl:a,handleModalClose:this.handleModalClose})]})}}]),a}(r.Component),H=Q;l.a.render(Object(S.jsx)(n.a.StrictMode,{children:Object(S.jsx)(H,{})}),document.getElementById("root"))},9:function(e,t,a){e.exports={Searchbar:"Searchbar_Searchbar__1ppc0",SearchForm:"Searchbar_SearchForm__UVQrw",SearchFormButton:"Searchbar_SearchFormButton__32JVO",SearchFormButtonLabel:"Searchbar_SearchFormButtonLabel__secKU",SearchFormInput:"Searchbar_SearchFormInput__2ndiJ"}}},[[81,1,2]]]);
//# sourceMappingURL=main.457cb16c.chunk.js.map